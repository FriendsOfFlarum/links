(()=>{var t={n:n=>{var o=n&&n.__esModule?()=>n.default:()=>n;return t.d(o,{a:o}),o},d:(n,o)=>{for(var r in o)t.o(o,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:o[r]})},o:(t,n)=>Object.prototype.hasOwnProperty.call(t,n),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};(()=>{"use strict";t.r(n),t.d(n,{components:()=>M,models:()=>V,utils:()=>T});const o=flarum.core.compat["forum/app"];var r=t.n(o);const e=flarum.core.compat["common/extend"],i=flarum.core.compat["common/components/HeaderPrimary"];var a=t.n(i);function s(t,n){return s=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t},s(t,n)}function l(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n)}const c=flarum.core.compat["common/Model"];var u=t.n(c);const p=flarum.core.compat["common/utils/mixin"];var f=function(t){function n(){return t.apply(this,arguments)||this}return l(n,t),n}(t.n(p)()(u(),{title:u().attribute("title"),icon:u().attribute("icon"),type:u().attribute("type"),url:u().attribute("url"),position:u().attribute("position"),isInternal:u().attribute("isInternal"),isNewtab:u().attribute("isNewtab"),isChild:u().attribute("isChild"),parent:u().hasOne("parent"),visibility:u().attribute("visibility")}));function d(t,n){for(var o=0;o<n.length;o++){var r=n[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const h=flarum.core.compat["common/components/Link"];var k=t.n(h);const v=flarum.core.compat["common/components/LinkButton"];var b=t.n(v);const y=flarum.core.compat["common/helpers/icon"];var w=t.n(y);const g=flarum.core.compat["common/components/Separator"];var B=t.n(g);const L=flarum.core.compat["common/utils/classList"];var N=t.n(L);const D=flarum.core.compat["common/components/Button"];var O=t.n(D),P=function(t){function n(){for(var n,o=arguments.length,r=new Array(o),e=0;e<o;e++)r[e]=arguments[e];return(n=t.call.apply(t,[this].concat(r))||this).attrs=void 0,n}l(n,t);var o,e,i=n.prototype;return i.view=function(t){return this.isLabel?this.labelView(t):this.linkView(t)},i.labelView=function(t){var n=this,o=this.attrs.link,r=this.attrs.inDropdown?"span":O();return m("[",null,this.attrs.inDropdown&&m(B(),null),m(r,{class:N()(this.class,"LinksButton--label"),onclick:function(t){n.attrs.inDropdown&&t.stopPropagation()},"data-toggle":this.attrs.isDropdownButton?"dropdown":void 0},this.icon,m("span",{className:"LinksButton-title"},o.title())),this.attrs.inDropdown&&m(B(),null))},i.linkView=function(t){var n=this.attrs.link,o={className:this.class,rel:this.rel,target:this.linkTarget,external:!n.isNewtab()&&!n.isInternal(),href:n.url()};return m(k(),o,this.icon,m("span",{className:"LinksButton-title"},n.title()))},o=n,(e=[{key:"isInternal",get:function(){var t=this.attrs.link;return t.isInternal()&&!t.isNewtab()}},{key:"isLabel",get:function(){return 0===this.attrs.link.url().length}},{key:"icon",get:function(){var t=this.attrs.link.icon();return t?w()(t,{className:"Button-icon LinksButton-icon"}):null}},{key:"rel",get:function(){return this.attrs.link.isNewtab()?"noopener noreferrer":void 0}},{key:"class",get:function(){return N()("LinksButton",this.attrs.className||"Button Button--link",{"LinksButton--inDropdown":this.attrs.inDropdown,active:this.isLinkCurrentPage})}},{key:"isLinkCurrentPage",get:function(){var t=this.attrs.link;if(!t.isInternal())return!1;var n=m.route.get()||"/",o=t.url().replace(r().forum.attribute("baseUrl"),"");return""===o&&(o="/"),0===n.indexOf(o)&&("/"===n||"/"!==o)}},{key:"linkTarget",get:function(){var t=this.attrs.link;if(!t.isInternal())return t.isNewtab()?"_blank":void 0}}])&&d(o.prototype,e),n}(b());function j(){return j=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},j.apply(this,arguments)}const C=flarum.core.compat["common/components/SplitDropdown"];var I=t.n(C);const _=flarum.core.compat["common/utils/ItemList"];var S=t.n(_);function x(t){return t.slice(0).sort((function(t,n){var o=t.position(),r=n.position();return o>r?1:o<r?-1:0}))}var A=function(t){function n(){return t.apply(this,arguments)||this}l(n,t),n.initAttrs=function(n){t.initAttrs.call(this,n),n.className+=" LinkDropdown",n.buttonClassName+=" Button--link"};var o=n.prototype;return o.view=function(n){var o=this.items().toArray();return t.prototype.view.call(this,j({},n,{children:o}))},o.getButton=function(t){var n=this.getFirstChild(t);return n.attrs.className=N()(n.attrs.className,"SplitDropdown-button Button",this.attrs.buttonClassName),n.attrs.isDropdownButton=!0,[n,m("button",{className:N()("Dropdown-toggle","Button","Button--icon",this.attrs.buttonClassName),"data-toggle":"dropdown"},w()("fas fa-caret-down",{className:"Button-caret"}))]},o.items=function(){var t=new(S()),n=this.attrs.link;return t.add("link"+n.id(),P.component({link:n})),x(r().store.all("links")).filter((function(t){return t.parent()===n})).forEach((function(o){t.add("link"+n.id()+"-"+o.id(),P.component({link:o,inDropdown:!0}))})),t},n}(I()),M={LinkDropdown:A,LinkItem:P},T={sortLinks:x},V={Link:f};r().initializers.add("fof-links",(function(){r().store.models.links=f,(0,e.extend)(a().prototype,"items",(function(t){x(r().store.all("links").filter((function(t){return!t.isChild()}))).map((function(n){var o=r().store.all("links").some((function(t){return t.parent()==n}));t.add("link"+n.id(),o?A.component({link:n}):P.component({link:n}))}))}))}))})(),module.exports=n})();
//# sourceMappingURL=forum.js.map