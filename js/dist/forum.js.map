{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@fof/links/webpack/bootstrap","webpack://@fof/links/webpack/runtime/compat get default export","webpack://@fof/links/webpack/runtime/define property getters","webpack://@fof/links/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/links/webpack/runtime/make namespace object","webpack://@fof/links/external root \"flarum.core.compat['forum/app']\"","webpack://@fof/links/external root \"flarum.core.compat['common/extend']\"","webpack://@fof/links/external root \"flarum.core.compat['forum/components/HeaderPrimary']\"","webpack://@fof/links/./src/common/utils/sortLinks.js","webpack://@fof/links/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@fof/links/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://@fof/links/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://@fof/links/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://@fof/links/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/links/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/links/external root \"flarum.core.compat['common/components/Link']\"","webpack://@fof/links/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@fof/links/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@fof/links/external root \"flarum.core.compat['common/components/Separator']\"","webpack://@fof/links/external root \"flarum.core.compat['common/utils/classList']\"","webpack://@fof/links/external root \"flarum.core.compat['common/components/Button']\"","webpack://@fof/links/./src/forum/components/LinkItem.tsx","webpack://@fof/links/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@fof/links/external root \"flarum.core.compat['common/components/SplitDropdown']\"","webpack://@fof/links/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@fof/links/./src/forum/components/LinkDropdown.js","webpack://@fof/links/./src/forum/components/index.ts","webpack://@fof/links/./src/common/utils/index.ts","webpack://@fof/links/external root \"flarum.core.compat['common/Model']\"","webpack://@fof/links/./src/common/models/Link.ts","webpack://@fof/links/./src/common/models/index.ts","webpack://@fof/links/external root \"flarum.core.compat['common/extenders']\"","webpack://@fof/links/./src/common/extend.ts","webpack://@fof/links/./src/forum/extend.ts","webpack://@fof/links/./src/forum/index.ts","webpack://@fof/links/./src/forum/extendHeader.tsx"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/HeaderPrimary'];","export default function sortLinks(links) {\n  return links.slice(0).sort((a, b) => {\n    const aPos = a.position();\n    const bPos = b.position();\n    return aPos > bPos ? 1 : aPos < bPos ? -1 : 0;\n  });\n}\n","export default function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}","import _typeof from \"./typeof.js\";\nexport default function toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Separator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/classList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","/* global m*/\n\nimport app from 'flarum/forum/app';\nimport Link from 'flarum/common/components/Link';\nimport LinkModel from '../../common/models/Link';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport icon from 'flarum/common/helpers/icon';\nimport Separator from 'flarum/common/components/Separator';\nimport classList from 'flarum/common/utils/classList';\nimport type { IButtonAttrs } from 'flarum/common/components/Button';\nimport type Mithril from 'mithril';\nimport Button from 'flarum/common/components/Button';\n\nexport interface ILinkItemAttrs extends IButtonAttrs {\n  link: LinkModel;\n  className?: string;\n  inDropdown?: boolean;\n  isDropdownButton?: boolean;\n}\n\nexport default class LinkItem extends LinkButton {\n  // Just definitions to satisfy TypeScript\n  attrs!: ILinkItemAttrs;\n\n  view(vnode: Mithril.Vnode<ILinkItemAttrs, never>): JSX.Element {\n    if (this.isLabel) return this.labelView(vnode);\n\n    return this.linkView(vnode);\n  }\n\n  labelView(vnode: Mithril.Vnode<ILinkItemAttrs, never>): JSX.Element {\n    const link = this.attrs.link;\n\n    const LinkLabelNode = this.attrs.inDropdown ? 'span' : Button;\n\n    return (\n      <>\n        {this.attrs.inDropdown && <Separator />}\n        <LinkLabelNode\n          class={classList(this.class, 'LinksButton--label')}\n          onclick={(e: MouseEvent) => {\n            if (this.attrs.inDropdown) {\n              // don't close dropdown when clicking label\n              e.stopPropagation();\n            }\n          }}\n          data-toggle={this.attrs.isDropdownButton ? 'dropdown' : undefined}\n        >\n          {this.icon}\n          <span className=\"LinksButton-title\">{link.title()}</span>\n        </LinkLabelNode>\n        {this.attrs.inDropdown && <Separator />}\n      </>\n    );\n  }\n\n  linkView(vnode: Mithril.Vnode<ILinkItemAttrs, never>): JSX.Element {\n    const link = this.attrs.link;\n\n    const linkAttrs = {\n      className: this.class,\n      rel: this.rel,\n      target: this.linkTarget,\n      external: link.isNewtab() ? false : !link.isInternal(),\n      href: this.linkHref,\n    };\n\n    return (\n      <Link {...linkAttrs}>\n        {this.icon}\n        <span className=\"LinksButton-title\">{link.title()}</span>\n      </Link>\n    );\n  }\n\n  get isInternal(): boolean {\n    const link = this.attrs.link;\n\n    return link.isInternal() && !link.isNewtab();\n  }\n\n  get isLabel(): boolean {\n    return this.attrs.link.url().length === 0;\n  }\n\n  get linkHref(): string {\n    const link = this.attrs.link;\n    const url = link.url();\n\n    if (url.startsWith('/') && link.isInternal()) {\n      return app.forum.attribute('baseUrl') + url;\n    }\n\n    return url;\n  }\n\n  get icon(): Mithril.Child | null {\n    const link = this.attrs.link;\n    const iconClass = link.icon();\n\n    if (iconClass) {\n      return icon(iconClass, { className: 'Button-icon LinksButton-icon' });\n    }\n\n    return null;\n  }\n\n  get rel(): string | undefined {\n    // Prevent security risk on older browsers.\n    // Modern browsers now have `noopener` by default and\n    // require `opener` to enable `window.opener`.\n    //\n    // Learn more:\n    // https://web.dev/external-anchors-use-rel-noopener\n\n    return classList(this.attrs.link.isNewtab() && 'noopener noreferrer', this.attrs.link.useRelMe() && 'me') || undefined;\n  }\n\n  get class(): string {\n    return classList('LinksButton', this.attrs.className || 'Button Button--link', {\n      'LinksButton--inDropdown': this.attrs.inDropdown,\n      active: this.isLinkCurrentPage,\n    });\n  }\n\n  get isLinkCurrentPage(): boolean {\n    const link = this.attrs.link;\n\n    if (!link.isInternal()) return false;\n\n    const base = app.forum.attribute<string>('baseUrl');\n\n    // Mithril returns the current path relative to the origin, which isn't necessarily the base forum URL\n    const currentUrl = new URL(m.route.get() || '/', base);\n    const currentPath = currentUrl.href.replace(base, '');\n\n    // The link from `this.linkHref` should already be absolute, but we'll make sure\n    const linkUrl = new URL(this.linkHref, base);\n    const linkPath = linkUrl.href.replace(base, '');\n\n    // The link is active if the current path starts with the link path.\n    // Except if it's the base url, in which case only an exact match is considered active\n    return currentPath.indexOf(linkPath) === 0 && (currentPath === '/' || linkPath !== '/');\n  }\n\n  get linkTarget(): string | undefined {\n    const link = this.attrs.link;\n\n    if (this.isInternal) return undefined;\n\n    return link.isNewtab() ? '_blank' : undefined;\n  }\n}\n","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/SplitDropdown'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","import app from 'flarum/forum/app';\n\nimport SplitDropdown from 'flarum/common/components/SplitDropdown';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport icon from 'flarum/common/helpers/icon';\nimport classList from 'flarum/common/utils/classList';\n\nimport LinkItem from './LinkItem';\nimport sortLinks from '../../common/utils/sortLinks';\nexport default class LinkDropdown extends SplitDropdown {\n  static initAttrs(attrs) {\n    super.initAttrs(attrs);\n\n    attrs.className += ' LinkDropdown';\n    attrs.buttonClassName += ' Button--link';\n  }\n\n  view(vnode) {\n    const children = this.items().toArray();\n\n    return super.view({ ...vnode, children });\n  }\n\n  getButton(children) {\n    // Make a copy of the attrs of the first child component. We will assign\n    // these attrs to a new button, so that it has exactly the same behaviour as\n    // the first child.\n    const firstChild = this.getFirstChild(children);\n    firstChild.attrs.className = classList(firstChild.attrs.className, 'SplitDropdown-button Button', this.attrs.buttonClassName);\n    firstChild.attrs.isDropdownButton = true;\n\n    return [\n      firstChild,\n      <button className={classList('Dropdown-toggle', 'Button', 'Button--icon', this.attrs.buttonClassName)} data-toggle=\"dropdown\">\n        {icon('fas fa-caret-down', { className: 'Button-caret' })}\n      </button>,\n    ];\n  }\n\n  /**\n   * Build an item list for the contents of the dropdown menu.\n   *\n   * @return {ItemList}\n   */\n  items() {\n    const items = new ItemList();\n    const parent = this.attrs.link;\n\n    items.add(`link${parent.id()}`, LinkItem.component({ link: parent }));\n\n    sortLinks(app.store.all('links'))\n      .filter((link) => link.parent() === parent)\n      .forEach((child) => {\n        items.add(`link${parent.id()}-${child.id()}`, LinkItem.component({ link: child, inDropdown: true }));\n      });\n\n    return items;\n  }\n}\n","import LinkDropdown from './LinkDropdown';\nimport LinkItem from './LinkItem';\n\nexport const components = {\n  LinkDropdown,\n  LinkItem,\n};\n","import sortLinks from './sortLinks';\n\nexport const utils = {\n  sortLinks,\n};\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","import Model from 'flarum/common/Model';\n\nexport default class Link extends Model {\n  title() {\n    return Model.attribute<string>('title').call(this);\n  }\n\n  icon() {\n    return Model.attribute<string>('icon').call(this);\n  }\n\n  type() {\n    return Model.attribute<string>('type').call(this);\n  }\n\n  url() {\n    return Model.attribute<string>('url').call(this);\n  }\n\n  position() {\n    return Model.attribute<number | null | undefined>('position').call(this);\n  }\n\n  isInternal() {\n    return Model.attribute<boolean>('isInternal').call(this);\n  }\n\n  isNewtab() {\n    return Model.attribute<boolean>('isNewtab').call(this);\n  }\n\n  useRelMe() {\n    return Model.attribute<boolean>('useRelMe').call(this);\n  }\n\n  isChild() {\n    return Model.attribute<boolean>('isChild').call(this);\n  }\n\n  parent() {\n    return Model.hasOne<Link>('parent').call(this);\n  }\n\n  visibility() {\n    return Model.attribute<string>('visibility').call(this);\n  }\n}\n","import Link from './Link';\n\nexport const models = {\n  Link,\n};\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extenders'];","import Extend from 'flarum/common/extenders';\nimport Link from './models/Link';\n\nexport default [\n  new Extend.Store() //\n    .add('links', Link),\n];\n","import commonExtend from '../common/extend';\n\nexport default [...commonExtend];\n","import app from 'flarum/forum/app';\nimport extendHeader from './extendHeader';\n\nexport * from './components';\nexport * from '../common/utils';\nexport * from '../common/models';\n\nexport { default as extend } from './extend';\n\napp.initializers.add('fof-links', () => {\n  extendHeader();\n});\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport HeaderPrimary from 'flarum/forum/components/HeaderPrimary';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport sortLinks from '../common/utils/sortLinks';\nimport type Mithril from 'mithril';\nimport Link from '../common/models/Link';\nimport LinkItem from './components/LinkItem';\nimport LinkDropdown from './components/LinkDropdown';\n\nexport default function extendHeader() {\n  extend(HeaderPrimary.prototype, 'items', function (items: ItemList<Mithril.Children>) {\n    const links = app.store.all<Link>('links').filter((link) => !link.isChild());\n    const addLink = (parent: Link | null | undefined) => {\n      const hasChildren = app.store.all<Link>('links').some((link) => link.parent() == parent);\n\n      items.add(`link${parent?.id()}`, hasChildren ? LinkDropdown.component({ link: parent }) : LinkItem.component({ link: parent }));\n    };\n\n    sortLinks(links).map(addLink);\n  });\n}\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","sortLinks","links","slice","sort","b","aPos","position","bPos","_typeof","iterator","constructor","toPropertyKey","t","i","r","e","toPrimitive","TypeError","String","_defineProperties","target","props","length","descriptor","configurable","writable","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","_inheritsLoose","subClass","superClass","create","LinkItem","_LinkButton","_this","_len","arguments","args","Array","_key","apply","concat","attrs","Constructor","protoProps","_proto","view","vnode","this","isLabel","labelView","linkView","_this2","link","LinkLabelNode","inDropdown","Button","m","'['","Separator","class","classList","onclick","stopPropagation","isDropdownButton","undefined","icon","className","title","linkAttrs","rel","linkTarget","external","isNewtab","isInternal","href","linkHref","Link","url","startsWith","app","attribute","iconClass","useRelMe","active","isLinkCurrentPage","base","currentPath","URL","route","replace","linkPath","indexOf","LinkButton","_extends","assign","source","LinkDropdown","_SplitDropdown","initAttrs","buttonClassName","children","items","toArray","getButton","firstChild","getFirstChild","ItemList","parent","add","id","component","all","filter","forEach","child","SplitDropdown","components","utils","_Model","Model","type","isChild","visibility","models","Extend","commonExtend","extend","HeaderPrimary","map","hasChildren","some"],"sourceRoot":""}