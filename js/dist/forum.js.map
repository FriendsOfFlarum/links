{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@fof/links/webpack/bootstrap","webpack://@fof/links/webpack/runtime/compat get default export","webpack://@fof/links/webpack/runtime/define property getters","webpack://@fof/links/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/links/webpack/runtime/make namespace object","webpack://@fof/links/external root \"flarum.core.compat['forum/app']\"","webpack://@fof/links/external root \"flarum.core.compat['common/extend']\"","webpack://@fof/links/external root \"flarum.core.compat['forum/components/HeaderPrimary']\"","webpack://@fof/links/./src/common/utils/sortLinks.js","webpack://@fof/links/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@fof/links/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://@fof/links/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://@fof/links/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://@fof/links/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/links/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/links/external root \"flarum.core.compat['common/components/Link']\"","webpack://@fof/links/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@fof/links/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@fof/links/external root \"flarum.core.compat['common/components/Separator']\"","webpack://@fof/links/external root \"flarum.core.compat['common/utils/classList']\"","webpack://@fof/links/external root \"flarum.core.compat['common/components/Button']\"","webpack://@fof/links/./src/forum/components/LinkItem.tsx","webpack://@fof/links/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@fof/links/external root \"flarum.core.compat['common/components/SplitDropdown']\"","webpack://@fof/links/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@fof/links/./src/forum/components/LinkDropdown.js","webpack://@fof/links/./src/forum/components/index.ts","webpack://@fof/links/./src/common/utils/index.ts","webpack://@fof/links/external root \"flarum.core.compat['common/Model']\"","webpack://@fof/links/./src/common/models/Link.ts","webpack://@fof/links/./src/common/models/index.ts","webpack://@fof/links/external root \"flarum.core.compat['common/extenders']\"","webpack://@fof/links/./src/common/extend.ts","webpack://@fof/links/./src/forum/extend.ts","webpack://@fof/links/./src/forum/index.ts","webpack://@fof/links/./src/forum/extendHeader.tsx"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/HeaderPrimary'];","export default function sortLinks(links) {\n  return links.slice(0).sort((a, b) => {\n    const aPos = a.position();\n    const bPos = b.position();\n    return aPos > bPos ? 1 : aPos < bPos ? -1 : 0;\n  });\n}\n","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(e, r) {\n  for (var t = 0; t < r.length; t++) {\n    var o = r[t];\n    o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, toPropertyKey(o.key), o);\n  }\n}\nfunction _createClass(e, r, t) {\n  return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", {\n    writable: !1\n  }), e;\n}\nexport { _createClass as default };","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Separator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/classList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","/* global m*/\n\nimport app from 'flarum/forum/app';\nimport Link from 'flarum/common/components/Link';\nimport LinkModel from '../../common/models/Link';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport icon from 'flarum/common/helpers/icon';\nimport Separator from 'flarum/common/components/Separator';\nimport classList from 'flarum/common/utils/classList';\nimport type { IButtonAttrs } from 'flarum/common/components/Button';\nimport type Mithril from 'mithril';\nimport Button from 'flarum/common/components/Button';\n\nexport interface ILinkItemAttrs extends IButtonAttrs {\n  link: LinkModel;\n  className?: string;\n  inDropdown?: boolean;\n  isDropdownButton?: boolean;\n}\n\nexport default class LinkItem extends LinkButton {\n  // Just definitions to satisfy TypeScript\n  attrs!: ILinkItemAttrs;\n\n  view(vnode: Mithril.Vnode<ILinkItemAttrs, never>): JSX.Element {\n    if (this.isLabel) return this.labelView(vnode);\n\n    return this.linkView(vnode);\n  }\n\n  labelView(vnode: Mithril.Vnode<ILinkItemAttrs, never>): JSX.Element {\n    const link = this.attrs.link;\n\n    const LinkLabelNode = this.attrs.inDropdown ? 'span' : Button;\n\n    return (\n      <>\n        {this.attrs.inDropdown && <Separator />}\n        <LinkLabelNode\n          class={classList(this.class, 'LinksButton--label')}\n          onclick={(e: MouseEvent) => {\n            if (this.attrs.inDropdown) {\n              // don't close dropdown when clicking label\n              e.stopPropagation();\n            }\n          }}\n          data-toggle={this.attrs.isDropdownButton ? 'dropdown' : undefined}\n        >\n          {this.icon}\n          <span className=\"LinksButton-title\">{link.title()}</span>\n        </LinkLabelNode>\n        {this.attrs.inDropdown && <Separator />}\n      </>\n    );\n  }\n\n  linkView(vnode: Mithril.Vnode<ILinkItemAttrs, never>): JSX.Element {\n    const link = this.attrs.link;\n\n    const linkAttrs = {\n      className: this.class,\n      rel: this.rel,\n      target: this.linkTarget,\n      external: link.isNewtab() ? false : !link.isInternal(),\n      href: this.linkHref,\n    };\n\n    return (\n      <Link {...linkAttrs}>\n        {this.icon}\n        <span className=\"LinksButton-title\">{link.title()}</span>\n      </Link>\n    );\n  }\n\n  get isInternal(): boolean {\n    const link = this.attrs.link;\n\n    return link.isInternal() && !link.isNewtab();\n  }\n\n  get isLabel(): boolean {\n    return this.attrs.link.url().length === 0;\n  }\n\n  get linkHref(): string {\n    const link = this.attrs.link;\n    const url = link.url();\n\n    if (url.startsWith('/') && link.isInternal()) {\n      return app.forum.attribute('baseUrl') + url;\n    }\n\n    return url;\n  }\n\n  get icon(): Mithril.Child | null {\n    const link = this.attrs.link;\n    const iconClass = link.icon();\n\n    if (iconClass) {\n      return icon(iconClass, { className: 'Button-icon LinksButton-icon' });\n    }\n\n    return null;\n  }\n\n  get rel(): string | undefined {\n    // Prevent security risk on older browsers.\n    // Modern browsers now have `noopener` by default and\n    // require `opener` to enable `window.opener`.\n    //\n    // Learn more:\n    // https://web.dev/external-anchors-use-rel-noopener\n\n    return classList(this.attrs.link.isNewtab() && 'noopener noreferrer', this.attrs.link.useRelMe() && 'me') || undefined;\n  }\n\n  get class(): string {\n    return classList('LinksButton', this.attrs.className || 'Button Button--link', {\n      'LinksButton--inDropdown': this.attrs.inDropdown,\n      active: this.isLinkCurrentPage,\n    });\n  }\n\n  get isLinkCurrentPage(): boolean {\n    const link = this.attrs.link;\n\n    if (!link.isInternal()) return false;\n\n    const base = app.forum.attribute<string>('baseUrl');\n\n    // Mithril returns the current path relative to the origin, which isn't necessarily the base forum URL\n    const currentUrl = new URL(m.route.get() || '/', base);\n    const currentPath = currentUrl.href.replace(base, '');\n\n    // The link from `this.linkHref` should already be absolute, but we'll make sure\n    const linkUrl = new URL(this.linkHref, base);\n    const linkPath = linkUrl.href.replace(base, '');\n\n    // The link is active if the current path starts with the link path.\n    // Except if it's the base url, in which case only an exact match is considered active\n    return currentPath.indexOf(linkPath) === 0 && (currentPath === '/' || linkPath !== '/');\n  }\n\n  get linkTarget(): string | undefined {\n    const link = this.attrs.link;\n\n    if (this.isInternal) return undefined;\n\n    return link.isNewtab() ? '_blank' : undefined;\n  }\n}\n","function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nexport { _extends as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/SplitDropdown'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","import app from 'flarum/forum/app';\n\nimport SplitDropdown from 'flarum/common/components/SplitDropdown';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport icon from 'flarum/common/helpers/icon';\nimport classList from 'flarum/common/utils/classList';\n\nimport LinkItem from './LinkItem';\nimport sortLinks from '../../common/utils/sortLinks';\nexport default class LinkDropdown extends SplitDropdown {\n  static initAttrs(attrs) {\n    super.initAttrs(attrs);\n\n    attrs.className += ' LinkDropdown';\n    attrs.buttonClassName += ' Button--link';\n  }\n\n  view(vnode) {\n    const children = this.items().toArray();\n\n    return super.view({ ...vnode, children });\n  }\n\n  getButton(children) {\n    // Make a copy of the attrs of the first child component. We will assign\n    // these attrs to a new button, so that it has exactly the same behaviour as\n    // the first child.\n    const firstChild = this.getFirstChild(children);\n    firstChild.attrs.className = classList(firstChild.attrs.className, 'SplitDropdown-button Button', this.attrs.buttonClassName);\n    firstChild.attrs.isDropdownButton = true;\n\n    return [\n      firstChild,\n      <button className={classList('Dropdown-toggle', 'Button', 'Button--icon', this.attrs.buttonClassName)} data-toggle=\"dropdown\">\n        {icon('fas fa-caret-down', { className: 'Button-caret' })}\n      </button>,\n    ];\n  }\n\n  /**\n   * Build an item list for the contents of the dropdown menu.\n   *\n   * @return {ItemList}\n   */\n  items() {\n    const items = new ItemList();\n    const parent = this.attrs.link;\n\n    items.add(`link${parent.id()}`, LinkItem.component({ link: parent }));\n\n    sortLinks(app.store.all('links'))\n      .filter((link) => link.parent() === parent)\n      .forEach((child) => {\n        items.add(`link${parent.id()}-${child.id()}`, LinkItem.component({ link: child, inDropdown: true }));\n      });\n\n    return items;\n  }\n}\n","import LinkDropdown from './LinkDropdown';\nimport LinkItem from './LinkItem';\n\nexport const components = {\n  LinkDropdown,\n  LinkItem,\n};\n","import sortLinks from './sortLinks';\n\nexport const utils = {\n  sortLinks,\n};\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","import Model from 'flarum/common/Model';\n\nexport default class Link extends Model {\n  title() {\n    return Model.attribute<string>('title').call(this);\n  }\n\n  icon() {\n    return Model.attribute<string>('icon').call(this);\n  }\n\n  type() {\n    return Model.attribute<string>('type').call(this);\n  }\n\n  url() {\n    return Model.attribute<string>('url').call(this);\n  }\n\n  position() {\n    return Model.attribute<number | null | undefined>('position').call(this);\n  }\n\n  isInternal() {\n    return Model.attribute<boolean>('isInternal').call(this);\n  }\n\n  isNewtab() {\n    return Model.attribute<boolean>('isNewtab').call(this);\n  }\n\n  useRelMe() {\n    return Model.attribute<boolean>('useRelMe').call(this);\n  }\n\n  isChild() {\n    return Model.attribute<boolean>('isChild').call(this);\n  }\n\n  parent() {\n    return Model.hasOne<Link>('parent').call(this);\n  }\n\n  isRestricted() {\n    return Model.attribute<boolean>('isRestricted').call(this);\n  }\n\n  guestOnly() {\n    return Model.attribute<boolean>('guestOnly').call(this);\n  }\n}\n","import Link from './Link';\n\nexport const models = {\n  Link,\n};\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extenders'];","import Extend from 'flarum/common/extenders';\nimport Link from './models/Link';\n\nexport default [\n  new Extend.Store() //\n    .add('links', Link),\n];\n","import commonExtend from '../common/extend';\n\nexport default [...commonExtend];\n","import app from 'flarum/forum/app';\nimport extendHeader from './extendHeader';\n\nexport * from './components';\nexport * from '../common/utils';\nexport * from '../common/models';\n\nexport { default as extend } from './extend';\n\napp.initializers.add('fof-links', () => {\n  extendHeader();\n});\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport HeaderPrimary from 'flarum/forum/components/HeaderPrimary';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport sortLinks from '../common/utils/sortLinks';\nimport type Mithril from 'mithril';\nimport Link from '../common/models/Link';\nimport LinkItem from './components/LinkItem';\nimport LinkDropdown from './components/LinkDropdown';\n\nexport default function extendHeader() {\n  extend(HeaderPrimary.prototype, 'items', function (items: ItemList<Mithril.Children>) {\n    const allLinks = app.store.all<Link>('links');\n    const links = allLinks.filter((link) => !link.isChild());\n\n    const addLink = (parent: Link | null | undefined) => {\n      const hasChildren = allLinks.some((link) => link.parent() == parent);\n\n      // If the link has no URL and no children, do not display it.\n      if (!parent?.url() && !hasChildren) {\n        return;\n      }\n\n      items.add(`link${parent?.id()}`, hasChildren ? LinkDropdown.component({ link: parent }) : LinkItem.component({ link: parent }));\n    };\n\n    sortLinks(links).map(addLink);\n  });\n}\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","sortLinks","links","slice","sort","b","aPos","position","bPos","_typeof","iterator","constructor","toPropertyKey","t","i","e","toPrimitive","r","TypeError","String","_defineProperties","length","configurable","writable","_setPrototypeOf","setPrototypeOf","bind","__proto__","_inheritsLoose","create","LinkItem","_LinkButton","_this","_len","arguments","args","Array","_key","apply","concat","attrs","_proto","view","vnode","this","isLabel","labelView","linkView","_this2","link","LinkLabelNode","inDropdown","Button","m","'['","Separator","class","classList","onclick","stopPropagation","isDropdownButton","undefined","icon","className","title","linkAttrs","rel","target","linkTarget","external","isNewtab","isInternal","href","linkHref","Link","url","startsWith","app","attribute","iconClass","useRelMe","active","isLinkCurrentPage","base","currentPath","URL","route","replace","linkPath","indexOf","LinkButton","_extends","assign","n","LinkDropdown","_SplitDropdown","initAttrs","buttonClassName","children","items","toArray","getButton","firstChild","getFirstChild","ItemList","parent","add","id","component","all","filter","forEach","child","SplitDropdown","components","utils","_Model","Model","type","isChild","isRestricted","guestOnly","models","Extend","commonExtend","extend","HeaderPrimary","allLinks","map","hasChildren","some"],"sourceRoot":""}